{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48918931-19353ebecebc74a7aac5f0327';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (searchQuery, page = 1) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 40,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images: ', error);\n    return { hits: [], totalHits: 0 };\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nexport const renderGallery = async (images, total, reset = false) => {\n  if (reset) {\n    gallery.innerHTML = '';\n    totalHits = total;\n    currentPage = 1;\n  }\n\n  if (images.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    loadMoreBtn.classList.add('hidden');\n    return;\n  }\n\n  const markup = images\n    .map(\n      image => `\n    <li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"info\">\n        <p>Likes<span>${image.likes}</span></p>\n        <p>Views <span>${image.views}</span></p>\n        <p>Comments<span>${image.comments}</span></p>\n        <p>Downloads<span>${image.downloads}</span></p>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  await lightbox.refresh();\n\n  if (gallery.children.length >= totalHits) {\n    loadMoreBtn.classList.add('hidden');\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    loadMoreBtn.classList.remove('hidden');\n  }\n\n  const { height: cardHeight } = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nexport const resetPagination = () => {\n  currentPage = 1;\n};\n\nexport const incrementPage = () => {\n  currentPage += 1;\n};\n\nexport const getCurrentPage = () => currentPage;\nexport const setCurrentQuery = query => {\n  currentQuery = query;\n};\nexport const getCurrentQuery = () => currentQuery;\n","import iziToast from 'izitoast';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  incrementPage,\n  resetPagination,\n  setCurrentQuery,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst searchInput = document.querySelector('#search-input');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = searchInput.value.trim();\n\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  setCurrentQuery(query);\n  resetPagination();\n  loader.classList.remove('hidden');\n\n  try {\n    const data = await fetchImages(query, 1);\n    renderGallery(data.hits, data.totalHits, true);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  const currentPage = incrementPage();\n  const query = searchInput.value.trim();\n\n  loader.classList.remove('hidden');\n\n  try {\n    const data = await fetchImages(query, currentPage);\n    renderGallery(data.hits, data.totalHits);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","axios","error","lightbox","SimpleLightbox","totalHits","gallery","loadMoreBtn","renderGallery","images","total","reset","iziToast","markup","image","cardHeight","incrementPage","searchForm","searchInput","loader","event","query","data","currentPage"],"mappings":"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"}